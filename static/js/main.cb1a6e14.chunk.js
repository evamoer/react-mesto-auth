(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{31:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(17),i=n.n(c),r=n(11),s=(n(31),n(5)),u=n(3),l="https://mesto.nomoreparties.co/v1/cohort-27",p={authorization:"8db06075-d4ea-471e-8c36-db2b91e349e8","Content-Type":"application/json"},d=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.statusText))},j="https://auth.nomoreparties.co",b=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.statusText))},_=n.p+"static/media/logo.bbe2a6ea.svg",m=n(0),O=function(e){var t=e.onLogout,n=Object(s.h)().pathname,a=Object(u.c)((function(e){return e.auth})),o=a.isLoggedIn,c=a.userEmail;return Object(m.jsxs)("header",{className:"header page__header",children:[Object(m.jsx)("img",{src:_,alt:"\u041b\u043e\u0433\u043e Mesto Russia",className:"header__logo"}),Object(m.jsxs)("div",{className:"header__navigation",children:[o&&"/"===n&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{className:"header__user-email",children:c}),Object(m.jsx)(r.b,{to:"sign-up",className:"header__link header__link_type_logout",onClick:t,children:"\u0412\u044b\u0439\u0442\u0438"})]}),!o&&"/sign-up"===n&&Object(m.jsx)(r.b,{to:"sign-in",className:"header__link",children:"\u0412\u043e\u0439\u0442\u0438"}),!o&&"/sign-in"===n&&Object(m.jsx)(r.b,{to:"sign-up",className:"header__link",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})},h=function(e){var t=e.onOpenPopup,n=Object(u.c)((function(e){return e.user})),a=n.avatar,o=n.name,c=n.about;return Object(m.jsxs)("section",{className:"profile content__profile",children:[Object(m.jsx)("div",{className:"profile__avatar-container",onClick:function(){t("editAvatarPopup")},children:Object(m.jsx)("img",{src:a,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u0440\u043e\u0444\u0438\u043b\u044f",className:"profile__avatar"})}),Object(m.jsxs)("div",{className:"profile__info",children:[Object(m.jsx)("h1",{className:"profile__name",children:o}),Object(m.jsx)("button",{className:"button button_type_edit-profile",onClick:function(){t("editProfilePopup")},type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"}),Object(m.jsx)("p",{className:"profile__about",children:c})]}),Object(m.jsx)("button",{className:"button button_type_add-place",onClick:function(){t("addPlacePopup")},type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0435\u0441\u0442\u043e"})]})},f=function(e){var t=e.name,n=e.link,a=e.likes,o=e.owner,c=e._id,i=e.onCardClick,r=e.onCardLike,s=e.onCardDelete,l=Object(u.c)((function(e){return e.user})),p=o._id===l._id,d=a.some((function(e){return e._id===l._id}));return Object(m.jsxs)("li",{className:"gallery-table__item",children:[p&&Object(m.jsx)("button",{className:"button card__delete-button",onClick:function(){s(c)}}),Object(m.jsxs)("article",{className:"card",children:[Object(m.jsx)("div",{className:"card__image-container",onClick:function(){i({name:t,link:n})},children:Object(m.jsx)("img",{src:n,alt:t,className:"card__image"})}),Object(m.jsxs)("div",{className:"card__info",children:[Object(m.jsx)("h2",{className:"card__title",children:t}),Object(m.jsxs)("div",{className:"card__like-area",children:[Object(m.jsx)("button",{className:"button card__like-button ".concat(d&&"card__like-button_active"),onClick:function(){r(a,c)},type:"button","aria-label":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a"}),Object(m.jsx)("span",{className:"card__like-number",children:a.length})]})]})]})]})},v=function(e){var t=e.onImageCard,n=e.onCardLike,a=e.onCardDelete,o=Object(u.c)((function(e){return e.cards}));return Object(m.jsx)("section",{className:"gallery content__gallery",children:Object(m.jsx)("ul",{className:"gallery-table",children:o.map((function(e){var o=e._id,c=e.name,i=e.link,r=e.likes,s=e.owner;return Object(m.jsx)(f,{name:c,link:i,likes:r,owner:s,_id:o,onCardClick:t,onCardLike:n,onCardDelete:a},o)}))})})},g=function(e){var t=e.onOpenPopup,n=e.onImageCard,a=e.onCardLike,o=e.onCardDelete;return Object(m.jsxs)("main",{className:"content section page__content",children:[Object(m.jsx)(h,{onOpenPopup:t}),Object(m.jsx)(v,{onImageCard:n,onCardLike:a,onCardDelete:o})]})},x=function(){return Object(m.jsx)("footer",{className:"footer section page__footer",children:Object(m.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Mesto Russia"})})},y=n(10),E=n(2),D=n(12);function C(){var e=Object(a.useState)({name:"",about:"",link:"",avatar:""}),t=Object(D.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)({}),i=Object(D.a)(c,2),r=i[0],s=i[1],u=Object(a.useState)(!0),l=Object(D.a)(u,2),p=l[0],d=l[1],j=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(e),s(t),d(n)}),[o,s,d]);return{values:n,handleChange:function(e){var t=e.target,a=t.name,c=t.value;o(Object(E.a)(Object(E.a)({},n),{},Object(y.a)({},a,c))),s(Object(E.a)(Object(E.a)({},r),{},Object(y.a)({},a,e.target.validationMessage))),d(e.target.closest("form").checkValidity())},errors:r,isValid:p,resetForm:j,setValues:o,setIsValid:d}}var N,L=function(e){var t=e.title,n=e.name,a=e.submitButtonText,o=e.isOpen,c=e.onMouseDown,i=e.onClose,r=e.onSubmit,s=e.children,u=e.isValid,l="popup ".concat(o&&"popup_opened");return Object(m.jsx)("div",{className:l,onMouseDown:c,children:Object(m.jsxs)("div",{className:"popup__container",children:[Object(m.jsx)("button",{className:"button popup__button_type_close",onClick:i,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u043e\u043a\u043d\u043e"}),Object(m.jsxs)("h2",{className:"popup__title",children:[" ",t," "]}),Object(m.jsxs)("form",{className:"popup__form",action:"/",method:"POST",onSubmit:r,name:n,children:[s,Object(m.jsx)("button",{className:"button popup__button_type_submit ".concat(!u&&"popup__button_type_submit_disabled"),type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",children:a})]})]})})},k=function(e){var t=e.onMouseDown,n=e.onClose,o=e.onUpdateUser,c=Object(u.c)((function(e){return e.popup})).editProfilePopupState,i=C(),r=i.values,s=i.handleChange,l=i.errors,p=i.isValid,d=i.setValues,j=Object(u.c)((function(e){return e.user})),b=j.name,_=j.about,O=Object(u.c)((function(e){return e.loading.isLoading}));Object(a.useEffect)((function(){c&&d({name:b,about:_})}),[c]);return Object(m.jsxs)(L,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"editProfileForm",submitButtonText:O?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:c,onMouseDown:t,onClose:n,onSubmit:function(e){e.preventDefault(),o(r)},isValid:p,children:[Object(m.jsxs)("div",{className:"popup__input-field",children:[Object(m.jsx)("input",{type:"text",className:"popup__input ".concat((null===l||void 0===l?void 0:l.name)&&"popup__input_type_error"),name:"name",placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",value:(null===r||void 0===r?void 0:r.name)||"",onChange:s,required:!0,minLength:2,maxLength:40}),(null===l||void 0===l?void 0:l.name)&&Object(m.jsx)("span",{className:"popup__error",id:"nameInputError",children:l.name})]}),Object(m.jsxs)("div",{className:"popup__input-field",children:[Object(m.jsx)("input",{type:"text",className:"popup__input ".concat((null===l||void 0===l?void 0:l.about)&&"popup__input_type_error"),name:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",value:(null===r||void 0===r?void 0:r.about)||"",onChange:s,required:!0,minLength:2,maxLength:200}),(null===l||void 0===l?void 0:l.about)&&Object(m.jsx)("span",{className:"popup__error",id:"aboutInputError",children:l.about})]})]})},P=function(e){var t=e.onMouseDown,n=e.onClose,o=e.onUpdateAvatar,c=Object(u.c)((function(e){return e.popup})).editAvatarPopupState,i=C(),r=i.values,s=i.handleChange,l=i.errors,p=i.isValid,d=i.setValues,j=i.resetForm,b=Object(u.c)((function(e){return e.loading.isLoading}));Object(a.useEffect)((function(){c&&(j(),d({avatar:""}))}),[c]);return Object(m.jsx)(L,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"editAvatarForm",submitButtonText:b?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:c,onMouseDown:t,onClose:n,onSubmit:function(e){e.preventDefault(),o(r)},isValid:p,children:Object(m.jsxs)("div",{className:"popup__input-field",children:[Object(m.jsx)("input",{type:"url",className:"popup__input ".concat((null===l||void 0===l?void 0:l.avatar)&&"popup__input_type_error"),name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u043e\u0432\u044b\u0439 \u0430\u0432\u0430\u0442\u0430\u0440",value:(null===r||void 0===r?void 0:r.avatar)||"",onChange:s,required:!0}),(null===l||void 0===l?void 0:l.avatar)&&Object(m.jsx)("span",{className:"popup__error",id:"avatarLinkInputError",children:l.avatar})]})})},S=function(e){var t=e.onMouseDown,n=e.onClose,a=Object(u.c)((function(e){return e.popup})).imagePopupState,o=Object(u.c)((function(e){return e.card}));return Object(m.jsx)("div",{className:"popup popup_type_full-image ".concat(o.name&&o.link&&a&&"popup_opened"),onMouseDown:t,children:Object(m.jsxs)("figure",{className:"popup__container popup__container_type_full-image",children:[Object(m.jsx)("button",{className:"button popup__button_type_close",onClick:n,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u043e\u043a\u043d\u043e"}),Object(m.jsx)("img",{src:o.link,alt:o.name,className:"popup__full-image"}),Object(m.jsx)("figcaption",{className:"popup__full-image-caption",children:o.name})]})})},T=function(e){var t=e.onMouseDown,n=e.onClose,o=e.onAddPlace,c=Object(u.c)((function(e){return e.popup})).addPlacePopupState,i=Object(u.c)((function(e){return e.loading.isLoading})),r=C(),s=r.values,l=r.handleChange,p=r.errors,d=r.isValid,j=r.setValues,b=r.resetForm;Object(a.useEffect)((function(){c&&(b(),j({name:"",link:""}))}),[c]);return Object(m.jsxs)(L,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"addCardForm",submitButtonText:i?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:c,onMouseDown:t,onClose:n,onSubmit:function(e){e.preventDefault(),o(s)},isValid:d,children:[Object(m.jsxs)("div",{className:"popup__input-field",children:[Object(m.jsx)("input",{type:"text",className:"popup__input ".concat((null===p||void 0===p?void 0:p.name)&&"popup__input_type_error"),name:"name",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",value:(null===s||void 0===s?void 0:s.name)||"",onChange:l,required:!0,minLength:2,maxLength:30}),(null===p||void 0===p?void 0:p.name)&&Object(m.jsx)("span",{className:"popup__error",id:"cardTitleInputError",children:null===p||void 0===p?void 0:p.name})]}),Object(m.jsxs)("div",{className:"popup__input-field",children:[Object(m.jsx)("input",{type:"url",className:"popup__input ".concat((null===p||void 0===p?void 0:p.link)&&"popup__input_type_error"),name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",value:(null===s||void 0===s?void 0:s.link)||"",onChange:l,required:!0}),(null===p||void 0===p?void 0:p.link)&&Object(m.jsx)("span",{className:"popup__error",id:"cardLinkInputError",children:p.link})]})]})},A=function(e){var t=e.onMouseDown,n=e.onClose,a=e.onApproveDeletePlace,o=Object(u.c)((function(e){return e.popup})).deletePlacePopupState;return Object(m.jsx)(L,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"delete-card",submitButtonText:"\u0414\u0430",isOpen:o,onMouseDown:t,onClose:n,onSubmit:function(e){e.preventDefault(),a()},isValid:!0,children:void 0})},R=function(e){var t=e.onRegister,n=Object(a.useState)({email:"",password:""}),o=Object(D.a)(n,2),c=o[0],i=o[1],s=function(e){var t=e.target,n=t.name,a=t.value;i(Object(E.a)(Object(E.a)({},c),{},Object(y.a)({},n,a)))};return Object(m.jsxs)("section",{className:"sign",children:[Object(m.jsx)("h1",{className:"sign__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(m.jsxs)("form",{className:"sign__form",onSubmit:function(e){e.preventDefault();var n=c.password,a=c.email;t(n,a)},children:[Object(m.jsx)("input",{className:"sign__input",type:"email",name:"email",placeholder:"Email",value:c.email,onChange:s}),Object(m.jsx)("input",{className:"sign__input",type:"password",name:"password",placeholder:"Password",value:c.password,onChange:s}),Object(m.jsx)("button",{className:"button sign__button",type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(m.jsxs)("p",{className:"sign__subtitle",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(m.jsx)(r.b,{to:"sign-in",className:"sign__link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},w=function(e){var t=e.onLogin,n=Object(a.useState)({email:"",password:""}),o=Object(D.a)(n,2),c=o[0],i=o[1],r=function(e){var t=e.target,n=t.name,a=t.value;i(Object(E.a)(Object(E.a)({},c),{},Object(y.a)({},n,a)))};return Object(m.jsxs)("section",{className:"sign",children:[Object(m.jsx)("h1",{className:"sign__title",children:"\u0412\u0445\u043e\u0434"}),Object(m.jsxs)("form",{className:"sign__form",onSubmit:function(e){e.preventDefault();var n=c.password,a=c.email;t(n,a)},children:[Object(m.jsx)("input",{className:"sign__input",type:"email",name:"email",placeholder:"Email",value:c.email,onChange:r}),Object(m.jsx)("input",{className:"sign__input",type:"password",name:"password",placeholder:"Password",value:c.password,onChange:r}),Object(m.jsx)("button",{className:"button sign__button",type:"submit","aria-label":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},I=n(26),G=["component"],M=function(e){var t=e.component,n=Object(I.a)(e,G),a=Object(u.c)((function(e){return e.auth})).isLoggedIn;return Object(m.jsx)(s.b,{children:a?Object(m.jsx)(t,Object(E.a)({},n)):Object(m.jsx)(s.a,{to:"/sign-in"})})},U=function(e){var t=e.onMouseDown,n=e.onClose,a=Object(u.c)((function(e){return e.popup})).infoTooltipState,o=Object(u.c)((function(e){return e.auth})).isRegistered,c="popup ".concat(a&&"popup_opened"),i=o?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.",r="popup__info-sign ".concat(o?"popup__info-sign_type_success":"popup__info-sign_type_fail");return Object(m.jsx)("div",{className:c,onMouseDown:t,children:Object(m.jsxs)("div",{className:"popup__container",children:[Object(m.jsx)("button",{className:"button popup__button_type_close",onClick:n,type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0432\u0441\u043f\u043b\u044b\u0432\u0430\u044e\u0449\u0435\u0435 \u043e\u043a\u043d\u043e"}),Object(m.jsx)("div",{className:r}),Object(m.jsx)("h2",{className:"popup__title popup__info-title",children:i})]})})},V={editProfilePopupState:!1,editAvatarPopupState:!1,addPlacePopupState:!1,deletePlacePopupState:!1,imagePopupState:!1,infoTooltipState:!1};!function(e){e.OPEN="OPEN",e.CLOSE="CLOSE"}(N||(N={}));var F,B={isRegistered:!1,isLoggedIn:!1,userEmail:""};!function(e){e.LOG_IN="LOG_IN",e.LOG_OUT="LOG_OUT",e.REGISTERED="REGISTERED",e.UNREGISTERED="UNREGISTERED"}(F||(F={}));var J,q={name:"",about:"",avatar:"",cohort:"",_id:""},K="GET_USER",z="UPDATE_PROFILE",H="UPDATE_AVATAR",Q=n(16),W=[];!function(e){e.GET_CARDS="GET_CARDS",e.ADD_CARD="ADD_CARD",e.LIKE_CARD="LIKE_CARD",e.DELETE_CARD="DELETE_CARD"}(J||(J={}));var X,Y={_id:"",name:"",link:"",createdAt:"",likes:[],owner:q};!function(e){e.OPENED_CARD="OPENED_CARD",e.DELETED_CARD="DELETED_CARD"}(X||(X={}));var Z,$={isLoading:!1};!function(e){e.LOADING="LOADING",e.LOADED="LOADED"}(Z||(Z={}));var ee=function(){return{type:Z.LOADING}},te=function(){return{type:Z.LOADED}},ne=function(){var e=Object(u.b)(),t=Object(s.g)(),n=Object(u.c)((function(e){return e.auth})).isLoggedIn,o=Object(u.c)((function(e){return e.user})),c=Object(u.c)((function(e){return e.card})),i=function(t){var n;e((n=t,{type:N.OPEN,payload:n})),document.addEventListener("keydown",h)},r=function(){e({type:N.CLOSE}),document.removeEventListener("keydown",h)},_=function(e){e.target===e.currentTarget&&r()},h=function(e){"Escape"===e.key&&r()};Object(a.useEffect)((function(){f()}),[]);var f=function(){var n=localStorage.getItem("token");n&&function(e){return fetch("".concat(j,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then(b)}(n).then((function(n){var a,o=n.data.email;e((a=o,{type:F.LOG_IN,payload:a})),t.push("/")})).catch(v)},v=function(e){console.log(e)};Object(a.useEffect)((function(){fetch("".concat(l,"/cards"),{headers:p}).then(d).then((function(t){return e((n=t,{type:J.GET_CARDS,payload:n}));var n})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[]);Object(a.useEffect)((function(){fetch("".concat(l,"/users/me"),{headers:p}).then(d).then((function(t){return e({type:K,payload:t})})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O,{onLogout:function(){localStorage.removeItem("token"),e({type:F.LOG_OUT}),t.push("/sign-in")}}),Object(m.jsxs)(s.d,{children:[Object(m.jsx)(s.b,{exact:!0,path:"/sign-in",children:Object(m.jsx)(w,{onLogin:function(e,t){(function(e,t){return fetch("".concat(j,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(b)})(e,t).then((function(e){if(e){var t=e.token;localStorage.setItem("token",t),f()}})).catch(v)}})}),Object(m.jsx)(s.b,{exact:!0,path:"/sign-up",children:Object(m.jsx)(R,{onRegister:function(t,n){(function(e,t){return fetch("".concat(j,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then(b)})(t,n).then((function(){e({type:F.REGISTERED}),i("infoTooltip")})).catch((function(t){e({type:F.UNREGISTERED}),i("infoTooltip"),v(t)}))}})}),Object(m.jsx)(M,{component:g,onOpenPopup:i,onImageCard:function(t){var n;e((n=t,{type:X.OPENED_CARD,payload:n})),i("imagePopup")},onCardLike:function(t,n){var a=t.some((function(e){return e._id===o._id}));(function(e,t){return fetch("".concat(l,"/cards/likes/").concat(e),{method:t?"DELETE":"PUT",headers:p}).then(d)})(n,a).then((function(t){var a;e((a={cardId:n,newCard:t},{type:J.LIKE_CARD,payload:a}))})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))},onCardDelete:function(t){var n;i("deletePlacePopup"),e((n=t,{type:X.DELETED_CARD,payload:n}))}}),n&&Object(m.jsx)(x,{})]}),Object(m.jsx)(k,{onMouseDown:_,onClose:r,onUpdateUser:function(t){e(ee()),function(e){return fetch("".concat(l,"/users/me"),{method:"PATCH",headers:p,body:JSON.stringify({name:e.name,about:e.about})}).then(d)}(t).then((function(t){return e({type:z,payload:t})})).then((function(){return r()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){return e(te())}))}}),Object(m.jsx)(P,{onMouseDown:_,onClose:r,onUpdateAvatar:function(t){e(ee()),function(e){return fetch("".concat(l,"/users/me/avatar"),{method:"PATCH",headers:p,body:JSON.stringify({avatar:e.avatar})}).then(d)}(t).then((function(t){return e({type:H,payload:t})})).then((function(){return r()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){return e(te())}))}}),Object(m.jsx)(T,{onMouseDown:_,onClose:r,onAddPlace:function(t){var n;e(ee()),(n=t,fetch("".concat(l,"/cards"),{method:"POST",headers:p,body:JSON.stringify({name:n.name,link:n.link})}).then(d)).then((function(t){return e((n=t,{type:J.ADD_CARD,payload:n}));var n})).then((function(){return r()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))})).finally((function(){return e(te())}))}}),Object(m.jsx)(A,{onMouseDown:_,onClose:r,onApproveDeletePlace:function(){var t;c._id&&(t=c._id,fetch("".concat(l,"/cards/").concat(t),{method:"DELETE",headers:p}).then(d)).then((function(){return e((t=c._id,{type:J.DELETE_CARD,payload:t}));var t})).then((function(){return r()})).catch((function(e){return console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e))}))}}),Object(m.jsx)(S,{onMouseDown:_,onClose:r}),Object(m.jsx)(U,{onMouseDown:_,onClose:r})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),o(e),c(e),i(e)}))},oe=n(22),ce=Object(oe.a)({popup:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N.OPEN:return Object(E.a)(Object(E.a)({},e),{},Object(y.a)({},"".concat(t.payload,"State"),!0));case N.CLOSE:return V;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.LOG_IN:return Object(E.a)(Object(E.a)({},e),{},{isLoggedIn:!0,userEmail:t.payload});case F.LOG_OUT:return Object(E.a)(Object(E.a)({},e),{},{isLoggedIn:!1,userEmail:""});case F.REGISTERED:return Object(E.a)(Object(E.a)({},e),{},{isLoggedIn:!1,isRegistered:!0});case F.UNREGISTERED:return Object(E.a)(Object(E.a)({},e),{},{isLoggedIn:!1,isRegistered:!1});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return Object(E.a)(Object(E.a)({},e),{},{name:t.payload.name,about:t.payload.about,avatar:t.payload.avatar,cohort:t.payload.cohort,_id:t.payload._id});case z:return Object(E.a)(Object(E.a)({},e),{},{name:t.payload.name,about:t.payload.about});case H:return Object(E.a)(Object(E.a)({},e),{},{avatar:t.payload.avatar});default:return e}},cards:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J.GET_CARDS:return[].concat(W,Object(Q.a)(t.payload));case J.ADD_CARD:return[t.payload].concat(Object(Q.a)(e));case J.LIKE_CARD:return Object(Q.a)(e.map((function(e){return e._id===t.payload.cardId?t.payload.newCard:e})));case J.DELETE_CARD:return Object(Q.a)(e.filter((function(e){return e._id!==t.payload})));default:return e}},card:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.OPENED_CARD:return Object(E.a)(Object(E.a)({},Y),t.payload);case X.DELETED_CARD:return Object(E.a)(Object(E.a)({},Y),{},{_id:t.payload});default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Z.LOADING:return Object(E.a)(Object(E.a)({},e),{},{isLoading:!0});case Z.LOADED:return Object(E.a)(Object(E.a)({},e),{},{isLoading:!1});default:return e}}}),ie=Object(oe.b)(ce);i.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(u.a,{store:ie,children:Object(m.jsx)(r.a,{basename:"/",children:Object(m.jsx)(ne,{})})})}),document.getElementById("root")),ae()}},[[39,1,2]]]);
//# sourceMappingURL=main.cb1a6e14.chunk.js.map